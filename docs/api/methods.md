# 中间件方法

这些将在请求生命周期的不同步骤中被调用。每个方法都可以返回一个promise，在继续通过中间件堆栈之前，该promise将被解决或拒绝。

?> **任何功能都是可选的，** 只有在需要时才应在自定义中间件中提供。

## `onRequest(config)`

在发出请求之前接收配置对象。用于添加标题、查询参数、验证数据等。

!> `config` 即使没有对其进行任何更改，它也必须返回接收到的内容。它还可以返回一个应使用配置解析以用于请求的promise。

## `onRequestError(error)`

现在没有互联网连接？您可能最终会使用此功能。对错误执行您需要的操作。

你可以返回一个promise，或者抛出另一个错误来保持中间件链的运行。

!> 未能返回拒绝的promise或抛出错误将意味着错误已得到处理并且链将继续走上成功的道路。

## `onSync(promise)`

正在提出请求并且正在传递它的promise。用它做你想做的事，但一定要 **返回一个 promise** ，无论是刚刚收到的还是新的。

?> 基于所有未解决的请求实现一种加载指示。

## `onResponse(response)`

解析响应可以在这里完成。假设来自您的 API 的所有响应都嵌套在`_data`属性中返回

```javascript
onResponse(response) {
  return response._data;
}
```

!> 应该返回原始 `response` 对象，或者一个新的/修改过的对象，或者一个promise。

## `onResponseError(error)`

没有认证？服务器问题？你可能会在这里结束。对错误执行您需要的操作。

?> 可以返回一个 promise，这在您想重试失败的请求时很有用。

!> 未能返回拒绝的promise或抛出错误将意味着错误已得到处理并且链将继续走上成功的道路。
